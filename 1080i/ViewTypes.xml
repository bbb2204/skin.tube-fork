<?xml version="1.0" encoding="UTF-8"?>
<includes>
    <include file="ViewTypeList.xml"/>
    <include file="ViewTypeListExt.xml"/>
    <include file="ViewTypePoster.xml"/>
    <include file="ViewTypeFanart.xml"/>
    <include file="ViewTypeFanartSmall.xml"/>
    <include file="ViewTypeAlbumArt.xml"/>


    <!-- Details -->
    <variable name="ViewItemDetail">
        <value condition="Container.Content(Seasons)">$VAR[]</value>
        <value condition="!IsEmpty(ListItem.Episode) + Container.Content(Episodes) + ListItem.Property(IsSpecial)">$INFO[ListItem.Episode]</value>
        <value condition="!IsEmpty(ListItem.Season) + !IsEmpty(ListItem.Episode) + Container.Content(Episodes) + !IntegerGreaterThan(ListItem.Episode, 9)">$INFO[ListItem.Season]x0$INFO[ListItem.Episode]</value>
        <value condition="!IsEmpty(ListItem.Season) + !IsEmpty(ListItem.Episode)">$INFO[ListItem.Season]x$INFO[ListItem.Episode]</value>
        <value condition="!IsEmpty(ListItem.Year)">$INFO[ListItem.Year]</value>
    </variable>

    <!-- Subtitle Extended List -->
    <variable name="ViewItemDetailExt">
        <value condition="!IsEmpty(ListItem.Artist)">$INFO[ListItem.Artist]</value>
        <value condition="!IsEmpty(ListItem.ChannelName)">$INFO[ListItem.Title]</value>
    </variable>


    <variable name="ViewItemDetail2">
        <value condition="[Container.Content(TvShows) | Container.Content(Seasons)] + IntegerGreaterThan(ListItem.Property(UnWatchedEpisodes), 0)">$INFO[ListItem.Property(UnWatchedEpisodes)]</value>
        <!--<value condition="Container.Content(TvShows) | Container.Content(Seasons)">[COLOR Disabled]$INFO[ListItem.Property(UnWatchedEpisodes)][/COLOR]</value>-->
        <value condition="Container.Content(Movies) | Container.Content(Episodes)">$INFO[ListItem.Rating]</value>
    </variable>

    <!-- Title -->
    <variable name="ViewItemTitle">
        <value condition="Container.Content(Seasons)">$VAR[]</value>
        <value condition="!IsEmpty(ListItem.OriginalTitle) + !IsEmpty(ListItem.Year) | !IsEmpty(ListItem.OriginalTitle) + !IsEmpty(ListItem.Episode)">$INFO[ListItem.OriginalTitle]</value>
        <value condition="!IsEmpty(ListItem.Title) + !IsEmpty(ListItem.Year) | !IsEmpty(ListItem.Title) + !IsEmpty(ListItem.Episode)">$INFO[ListItem.Title]</value>
        <value condition="!IsEmpty(ListItem.Year) | !IsEmpty(ListItem.Episode)">$INFO[ListItem.Label]</value>
    </variable>

    <!-- Title Extended List -->
    <variable name="ViewItemTitleExt">
        <value condition="!IsEmpty(ListItem.Title) + !IsEmpty(ListItem.Artist)">$INFO[ListItem.Title]</value>
        <value condition="!IsEmpty(ListItem.ChannelName)">$INFO[ListItem.ChannelName]</value>
        <value>$INFO[ListItem.Label]</value>
    </variable>
    <variable name="ViewItemTitleNoDetail">
        <value condition="Container.Content(Seasons) + StringCompare(ListItem.Title, $LOCALIZE[20366])">All seasons</value>
        <value condition="Container.Content(Seasons)">$INFO[ListItem.Title]</value>

        <!-- Force an empty label for items with a detail -->
        <value condition="!IsEmpty(ListItem.Year) | !IsEmpty(ListItem.Episode)">$VAR[]</value>

        <value condition="Container.Content(Albums) + !IsEmpty(ListItem.Title) + !IsEmpty(ListItem.Artist) | Container.Content(Songs) + !IsEmpty(ListItem.Title) + !IsEmpty(ListItem.Artist) ">[COLOR Secondary]$INFO[ListItem.Artist] - [/COLOR]$INFO[ListItem.Title]</value>
        <value>$INFO[ListItem.Label]</value>
    </variable>

    <!-- Active overlay -->
    <include name="ActiveOverlay">
        <control type="group">
            <control type="image">
                <top>-10</top>
                <bottom>-10</bottom>
                <left>-10</left>
                <right>-10</right>

                <texture border="10">active-overlay.png</texture>
                
                <animation type="Focus" reversible="false">
                    <include>ActiveOverlayAnimation</include>
                </animation>

                <animation type="Visible" reversible="false">
                    <include>ActiveOverlayAnimation</include>
                </animation>

                <visible>!Window.IsActive(BusyDialog)</visible>
            </control>
            <control type="image">
                <top>-7</top>
                <bottom>-7</bottom>
                <left>-7</left>
                <right>-7</right>

                <texture border="10">active-overlay.png</texture>

                <animation type="Visible" reversible="true">
                    <effect type="Fade" start="0" end="100" time="150"/>
                </animation>

                <visible>Window.IsActive(BusyDialog)</visible>
            </control>
        </control>
    </include>

    <include name="ActiveOverlayAnimation">
        <effect type="Zoom" start="95" end="100" time="200" center="auto" tween="cubic"/>
        <effect type="Fade" start="0" end="100" time="150"/>
    </include>
    <include name="BusyOverlay">
        <!-- Busy image -->
        <!--control type="image">
            <right>0</right>
            <width>35</width>
            <texture>solid.png</texture>
            <colordiffuse>Primary</colordiffuse>

            <visible>Window.IsActive(BusyDialog)</visible>
            <!--animation condition="true" effect="rotate" center="auto" start="360" end="0" time="500" loop="true">Conditional</animation-->
            <!--animation effect="fade" start="100" end="40" pulse="true" time="300" condition="True">Conditional</animation>
        </control-->
        <!-- Busy Overlay -->
        <control type="group">
            <!--right>0</right-->
            <!--width>35</width-->
            <aligny>center</aligny>
            <visible>Window.IsActive(BusyDialog)</visible>
            <animation type="Visible" reversible="true">
                <!--effect type="Zoom" start="0" end="100" time="200" center="auto" tween="cubic"/-->
                <effect type="Fade" start="0" end="100" time="150" tween="cubic" easing="inout"/>
            </animation>

            <control type="image">
                <texture colordiffuse="BusyOverlay">solid.png</texture>
            </control>
            <!--control type="group">
                <right>0</right>
                <width>35</width>
                <control type="image">
                    <texture colordiffuse="BusyOverlay">solid.png</texture>
                </control>
                <control type="image">
                    <centertop>50%</centertop>
                    <centerleft>50%</centerleft>
                    <width>16</width>
                    <height>16</height>

                    <texture colordiffuse="BusySpinner">icon-stop.png</texture>
                    
                    <animation condition="true" effect="rotate" center="auto" start="360" end="0" time="500" loop="true">Conditional</animation>
                </control>
            </control-->
            <control type="image">
                <centertop>50%</centertop>
                <centerleft>50%</centerleft>
                <width>16</width>
                <height>16</height>

                <texture colordiffuse="BusySpinner">icon-record.png</texture>
                
                <animation condition="true" effect="Slide" start="-262,0" end="262,0" time="500" center="auto" tween="cubic" easing="inout" pulse="true">Conditional</animation>
            </control>
            <!--control type="image">
                <centertop>50%</centertop>
                <centerleft>50%</centerleft>
                <width>64</width>
                <height>64</height>

                <texture colordiffuse="BusySpinner">spinner.png</texture>
                <animation condition="true" effect="rotate" center="auto" start="360" end="0" time="500" loop="true">Conditional</animation>
            </control-->
        </control>
    </include>

    <include name="ImageOverlay">
        <control type="image">
            <top>-10</top>
            <bottom>-10</bottom>
            <left>-10</left>
            <right>-10</right>

            <texture border="15">image-overlay.png</texture>
        </control>
    </include>

    <include name="ItemBadge">
        <control type="group">
            <top>0</top>
            <right>0</right>
            <width>60</width>
            <height>60</height>

            <include>ItemBadgeVisibility</include>

            <control type="image">
                <left>-2</left>
                <bottom>-2</bottom>
                <include>FillParent</include>

                <texture colordiffuse="GlobalBackground">badge-corner.png</texture>
            </control>

            <control type="image">
                <include>FillParent</include>

                <texture>badge-corner.png</texture>
                <colordiffuse>BadgeBackground</colordiffuse>

                <visible>!ListItem.IsPlaying</visible>
            </control>
            <control type="image">
                <include>FillParent</include>

                <texture>badge-corner.png</texture>
                <colordiffuse>BadgePlayingBackground</colordiffuse>

                <visible>ListItem.IsPlaying</visible>
            </control>

            <control type="image">
                <top>10</top>
                <right>10</right>
                <width>16</width>
                <height>16</height>

                <texture colordiffuse="BadgeIcon">$VAR[ItemBadgeIcon]</texture>
            </control>
        </control>
    </include>

    <include name="ItemBadgeVisibility">
        <visible>ListItem.IsResumable | SubString(ListItem.Overlay, OverlayUnwatched) | IntegerGreaterThan(ListItem.Property(UnWatchedEpisodes), 0) | ListItem.IsPlaying</visible>
    </include>

    <variable name="ItemBadgeIcon">
        <value condition="ListItem.IsPlaying">icon-playing.png</value>
        <value condition="ListItem.IsResumable">icon-partwatched.png</value>
        <value condition="SubString(ListItem.Overlay, OverlayUnwatched) | IntegerGreaterThan(ListItem.Property(UnWatchedEpisodes), 0)">icon-unwatched.png</value>
    </variable>
    
    <include name="DefaultImage">
        <control type="image">
            <include>FillParent</include>
            <texture colordiffuse="BackgroundSecondary">solid.png</texture>
        </control>
    </include>

    <!-- Controls the visibility of the scrollbar, from Black's Experience1080 -->
    <include name="ViewScrollbarVisibility">
        <control type="image" id="601">
            <animation effect="fade" start="100" end="0" time="0" delay="1500" condition="!Window.Previous(FullscreenVideo)">WindowOpen</animation>
        </control>
        <control type="image" id="602">
            <animation effect="fade" start="0" end="100" time="0">Visible</animation>
            <animation effect="fade" start="100" end="0" time="0">Hidden</animation>
            <visible>Control.HasFocus(70) | !Control.IsVisible(601)</visible>
        </control>
        <control type="image" id="602">
            <animation effect="fade" start="0" end="100" time="0">Visible</animation>
            <animation effect="fade" start="100" end="0" time="0" delay="1500">Hidden</animation>
            <visible>!Control.HasFocus(70) + [Container.Scrolling | Container.OnScrollNext | Container.OnScrollPrevious]</visible>
        </control>
    </include>
    
    <include name="ViewTypeCommon">
        <pagecontrol>600</pagecontrol>

        <orientation>horizontal</orientation>
        <preloaditems>2</preloaditems>
    </include>

    <include name="ViewTypeHorizontal">
        <include>ViewTypeCommon</include>

        <onup condition="!Skin.HasSetting(KioskMode)">3002</onup>
        <onup condition="Skin.HasSetting(KioskMode) + Control.IsVisible(600)">600</onup>
        <ondown condition="Control.IsVisible(600)">600</ondown>
        <ondown condition="!Skin.HasSetting(KioskMode) + !Control.IsVisible(600)">3002</ondown>
    </include>

    <include name="ViewScrollbarHorizontal">
        <control type="scrollbar" id="600">
            <top>850</top>
            <width>1720</width>

            <onup>500</onup>
            <ondown condition="!Skin.HasSetting(KioskMode)">3002</ondown>
            <ondown condition="Skin.HasSetting(KioskMode)">500</ondown>

            <orientation>horizontal</orientation>
            <showonepage>false</showonepage>

            <animation effect="fade" start="100" end="0" time="200" tween="cubic" easing="out" condition="!Control.IsVisible(602) + !Control.HasFocus(600)">Conditional</animation>
        </control>
    </include>

</includes>